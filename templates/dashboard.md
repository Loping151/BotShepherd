# 🐑 BotShepherd 快速入门指南

欢迎使用 BotShepherd！本指南将帮助您快速了解和使用 BotShepherd 的基本功能。

## 🚀 快速开始

### 基本指令

所有指令，都可以在Webui中进行编辑！

BotShepherd 内置了丰富的指令系统，默认前缀为 `bs`：

#### 帮助指令
- `bs帮助` - 显示所有可用指令
- `bs帮助 指令名` - 显示特定指令的详细帮助

#### 统计查询
- `bs统计` - 显示今日统计概览
- `bs统计 -d today` - 查看今日详细统计
- `bs统计 -d yesterday` - 查看昨日统计
- `bs统计 -d 2024-01-01` - 查看指定日期统计
- `bs统计 -k 关键词` - 搜索包含关键词的消息

#### 黑名单管理
- `bs黑名单` - 查看当前黑名单
- `bs黑名单 add 123456` - 添加用户到黑名单
- `bs黑名单 remove 123456` - 从黑名单移除用户
- `bs黑名单 add group 789012` - 添加群组到黑名单

#### 群组管理
- `bs群管理 list` - 查看所有群组
- `bs群管理 expire 群号 30` - 设置群组30天后到期
- `bs群管理 enable 群号` - 启用群组
- `bs群管理 disable 群号` - 禁用群组

#### 消息模拟
- `bs触发 QQ号 指令` - 模拟指定用户发送指令

### 4. 权限系统

#### 三级权限结构

1. **Superuser（超级用户）**
   - 在 `global_config.json` 中配置
   - 拥有所有权限
   - 消息不受任何过滤限制
   - 可以管理全局设置

2. **群管理员**
   - 通过 OneBot 消息中的 `role` 字段自动识别
   - 可以管理所在群组的设置
   - 可以设置群组过滤词
   - 受全局过滤限制

3. **普通用户**
   - 默认权限等级
   - 受所有过滤规则限制
   - 只能使用基本查询指令

#### 权限检查流程

```
消息接收 → 检查是否为 Superuser → 检查群管权限 → 应用过滤规则 → 执行指令
```

### 5. 过滤系统

#### 全局过滤

在 `global_config.json` 中配置：

```json
{
  "global_filters": {
    "receive_filters": ["敏感词1", "敏感词2"],    // 接收过滤
    "send_filters": ["禁止词1", "禁止词2"],       // 发送过滤
    "prefix_protections": ["危险前缀"]            // 前缀保护
  }
}
```

#### 群组过滤

每个群组可以独立设置过滤词：

- **Superuser 过滤**：由超级用户设置，优先级最高
- **群管过滤**：由群管理员设置，在 superuser 过滤之后执行

### 6. Web 界面功能

#### 主要页面

1. **仪表板** - 系统概览和实时状态
2. **连接管理** - WebSocket 连接配置和监控
3. **账号管理** - Bot 账号信息和状态
4. **群组管理** - 群组配置和权限设置
5. **统计分析** - 消息统计和趋势图表
6. **过滤管理** - 过滤词和规则配置
7. **日志查看** - 系统日志和操作记录
8. **系统设置** - 全局配置管理

#### 实时功能

- **连接状态监控**：实时显示 WebSocket 连接状态
- **消息统计**：实时更新消息数量和趋势
- **系统资源**：CPU、内存、磁盘使用情况
- **操作日志**：记录所有配置变更和重要操作

### 7. 常见使用场景

#### 场景1：多框架统一管理

```
客户端 → BotShepherd → NapCat
                   → Yunzai-Bot
                   → 其他框架
```

#### 场景2：消息过滤和审核

- 设置敏感词过滤
- 配置群组白名单
- 监控消息内容和频率

#### 场景3：数据统计和分析

- 查看消息量趋势
- 分析用户活跃度
- 监控指令使用情况

### 8. 故障排除

#### 常见问题

1. **连接失败**
   - 检查 WebSocket 地址是否正确
   - 确认目标服务是否运行
   - 查看日志文件获取详细错误信息

2. **指令无响应**
   - 确认指令前缀是否正确
   - 检查用户权限
   - 查看是否被过滤规则拦截

3. **Web 界面无法访问**
   - 确认端口是否被占用
   - 检查防火墙设置
   - 验证用户名密码是否正确

#### 日志查看

- **系统日志**：`logs/botshepherd.log`
- **操作日志**：`logs/operation/`
- **消息日志**：`logs/message/`
- **Web 日志**：`logs/web/`