# ğŸ‘ BotShepherd - Botç‰§ç¾Šäºº

**BotShepherdï¼ˆBotç‰§ç¾Šäººï¼‰** æ˜¯ä¸€ä¸ªå¼ºå¤§çš„OneBot v11åè®®WebSocketä»£ç†å’Œç®¡ç†ç³»ç»Ÿã€‚å°±åƒç‰§ç¾Šäººç®¡ç†ç¾Šç¾¤ä¸€æ ·ï¼ŒBotShepherdå¸®åŠ©æ‚¨ç»Ÿä¸€ç®¡ç†å’Œåè°ƒå¤šä¸ªBotå®ä¾‹ï¼Œå®ç°ä¸€å¯¹å¤šçš„è¿æ¥ç®¡ç†ã€æ¶ˆæ¯è¿‡æ»¤ã€ç»Ÿè®¡åˆ†æå’Œæƒé™æ§åˆ¶ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### ğŸ”— è¿æ¥ç®¡ç†
- **ä¸€å¯¹å¤šä»£ç†**ï¼šä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥å¯¹åº”å¤šä¸ªç›®æ ‡æ¡†æ¶è¿æ¥
- **å®æ—¶ç›‘æ§**ï¼šWebSocketè¿æ¥çŠ¶æ€å®æ—¶ç›‘æ§å’Œç®¡ç†
- **è‡ªåŠ¨é‡è¿**ï¼šè¿æ¥æ–­å¼€æ—¶è‡ªåŠ¨é‡è¿æœºåˆ¶
- **è´Ÿè½½å‡è¡¡**ï¼šæ”¯æŒå¤šç›®æ ‡ç«¯ç‚¹çš„è´Ÿè½½åˆ†é…

### ğŸ“¨ æ¶ˆæ¯å¤„ç†
- **OneBot v11æ ‡å‡†**ï¼šå®Œæ•´å…¼å®¹OneBot v11åè®®è§„èŒƒ
- **æ¶ˆæ¯è§£æ**ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€@ã€å›å¤ã€è½¬å‘ç­‰æ‰€æœ‰æ¶ˆæ¯ç±»å‹
- **æ¶ˆæ¯æ ‡å‡†åŒ–**ï¼šå¯é€‰çš„æ¶ˆæ¯æ ¼å¼æ ‡å‡†åŒ–ï¼ˆå¦‚NapCatå…¼å®¹ï¼‰
- **åˆ«åç³»ç»Ÿ**ï¼šå…¨å±€æŒ‡ä»¤åˆ«åæ›¿æ¢åŠŸèƒ½

### ğŸ›¡ï¸ æƒé™ä¸è¿‡æ»¤
- **ä¸‰çº§æƒé™**ï¼šsuperuser > ç¾¤ç®¡/ç¾¤ä¸» > æ™®é€šç”¨æˆ·
- **æ™ºèƒ½è¿‡æ»¤**ï¼šå…¨å±€+ç¾¤ç»„åŒå±‚è¿‡æ»¤ç³»ç»Ÿ
- **é»‘ç™½åå•**ï¼šæ”¯æŒç”¨æˆ·å’Œç¾¤ç»„é»‘åå•ç®¡ç†
- **å‰ç¼€ä¿æŠ¤**ï¼šé˜²æ­¢è¯±å¯¼è§¦å‘çš„å‰ç¼€ä¿æŠ¤æœºåˆ¶

### ğŸ“Š ç»Ÿè®¡åˆ†æ
- **å®æ—¶ç»Ÿè®¡**ï¼šæ¶ˆæ¯æ•°é‡ã€æŒ‡ä»¤ä½¿ç”¨ã€å…³é”®è¯ç›‘æ§
- **è¶‹åŠ¿åˆ†æ**ï¼š7å¤©/24å°æ—¶æ¶ˆæ¯é‡è¶‹åŠ¿å›¾è¡¨
- **æ•°æ®æŸ¥è¯¢**ï¼šæ”¯æŒæŒ‰æ—¥æœŸã€å…³é”®è¯ã€ç¾¤ç»„ç­‰ç»´åº¦æŸ¥è¯¢
- **è‡ªåŠ¨æ¸…ç†**ï¼šå¯é…ç½®çš„æ•°æ®è¿‡æœŸè‡ªåŠ¨æ¸…ç†

### ğŸ›ï¸ Webç®¡ç†ç•Œé¢
- **ç°ä»£åŒ–UI**ï¼šåŸºäºBootstrap 5çš„å“åº”å¼ç•Œé¢
- **å®æ—¶ç›‘æ§**ï¼šè¿æ¥çŠ¶æ€ã€æ¶ˆæ¯ç»Ÿè®¡å®æ—¶æ›´æ–°
- **é…ç½®ç®¡ç†**ï¼šæ‰€æœ‰é…ç½®é¡¹çš„å¯è§†åŒ–ç®¡ç†
- **å›¾è¡¨å±•ç¤º**ï¼šChart.jsé©±åŠ¨çš„æ•°æ®å¯è§†åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- SQLite/MySQL/PostgreSQLï¼ˆå¯é€‰ï¼‰

### å®‰è£…æ­¥éª¤

#### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/Loping151/BotShepherd.git
cd BotShepherd
```

2. **è¿è¡Œå®‰è£…è„šæœ¬**
```bash
python install.py
```

3. **å¯åŠ¨ç³»ç»Ÿ**
```bash
python main.py
```

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/Loping151/BotShepherd.git
cd BotShepherd
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **åˆå§‹åŒ–é…ç½®**
```bash
python main.py --setup
```

4. **å¯åŠ¨ç³»ç»Ÿ**
```bash
python main.py
```

#### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨Makefileï¼ˆLinux/Macï¼‰

```bash
# å®‰è£…ä¾èµ–å¹¶åˆå§‹åŒ–
make quick-start

# å¯åŠ¨ç³»ç»Ÿ
make run
```

### ä¾èµ–æ£€æŸ¥

å¦‚æœé‡åˆ°ä¾èµ–é—®é¢˜ï¼Œå¯ä»¥è¿è¡Œä¾èµ–æ£€æŸ¥å·¥å…·ï¼š

```bash
python check_requirements.py
```

### ç³»ç»Ÿæµ‹è¯•

åœ¨å¯åŠ¨å‰ï¼Œå»ºè®®è¿è¡Œç³»ç»Ÿæµ‹è¯•ç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š

```bash
python main.py --test
```

### è®¿é—®Webç•Œé¢

å¯åŠ¨åï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:8080`
- é»˜è®¤ç”¨æˆ·åï¼š`admin`
- é»˜è®¤å¯†ç ï¼š`admin`

### åŸºç¡€é…ç½®

#### 1. è¿æ¥é…ç½®
åœ¨ `config/connections.json` ä¸­é…ç½®è¿æ¥ä¿¡æ¯ï¼š

```json
{
  "connections": {
    "default": {
      "name": "é»˜è®¤è¿æ¥",
      "description": "NapCatåˆ°Yunzaiçš„ä»£ç†è¿æ¥",
      "client_endpoint": "ws://localhost:2537/OneBotv11",
      "target_endpoints": [
        "ws://localhost:2536/OneBotv11"
      ],
      "enabled": true
    }
  }
}
```

#### 2. å…¨å±€é…ç½®
åœ¨ `config/global_config.json` ä¸­é…ç½®ç³»ç»Ÿå‚æ•°ï¼š

```json
{
  "superusers": ["123456789"],
  "command_prefix": "bs",
  "global_aliases": {
    "ww": ["ww", "xw"]
  },
  "allow_private": true,
  "private_friend_only": true
}
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æŒ‡ä»¤ç³»ç»Ÿ

BotShepherdå†…ç½®äº†ä¸°å¯Œçš„æŒ‡ä»¤ç³»ç»Ÿï¼Œé»˜è®¤å‰ç¼€ä¸º `bs`ï¼š

- `bså¸®åŠ©` - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `bsç»Ÿè®¡ -d today` - æŸ¥çœ‹ä»Šæ—¥ç»Ÿè®¡
- `bsç»Ÿè®¡ -k å…³é”®è¯` - æœç´¢å…³é”®è¯
- `bsé»‘åå• add 123456` - æ·»åŠ é»‘åå•
- `bsç¾¤ç®¡ç† expire ç¾¤å· 30` - è®¾ç½®ç¾¤ç»„30å¤©ååˆ°æœŸ
- `bsè§¦å‘ QQå· æŒ‡ä»¤` - æ¨¡æ‹Ÿç”¨æˆ·å‘é€æŒ‡ä»¤

### æƒé™ç³»ç»Ÿ

1. **Superuserï¼ˆè¶…çº§ç”¨æˆ·ï¼‰**
   - é…ç½®åœ¨ `global_config.json` ä¸­
   - æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œæ¶ˆæ¯ä¸å—è¿‡æ»¤é™åˆ¶

2. **ç¾¤ç®¡ç†å‘˜**
   - é€šè¿‡OneBotæ¶ˆæ¯ä¸­çš„ `role` å­—æ®µè¯†åˆ«
   - å¯ç®¡ç†ç¾¤ç»„è®¾ç½®å’Œè¿‡æ»¤è¯

3. **æ™®é€šç”¨æˆ·**
   - é»˜è®¤æƒé™ç­‰çº§
   - å—æ‰€æœ‰è¿‡æ»¤è§„åˆ™é™åˆ¶

### è¿‡æ»¤ç³»ç»Ÿ

#### å…¨å±€è¿‡æ»¤
- **æ¥æ”¶è¿‡æ»¤**ï¼šé˜»æ­¢åŒ…å«ç‰¹å®šè¯æ±‡çš„æ¶ˆæ¯ä¼ é€’ç»™æ¡†æ¶
- **å‘é€è¿‡æ»¤**ï¼šé˜»æ­¢åŒ…å«ç‰¹å®šè¯æ±‡çš„æ¶ˆæ¯å‘é€ç»™å®¢æˆ·ç«¯
- **å‰ç¼€ä¿æŠ¤**ï¼šä¸ºç‰¹å®šå‰ç¼€æ·»åŠ è­¦å‘Šæ ‡è¯†

#### ç¾¤ç»„è¿‡æ»¤
- **åŒå±‚æ§åˆ¶**ï¼šsuperuserè®¾ç½® + ç¾¤ç®¡è®¾ç½®
- **ä¼˜å…ˆçº§**ï¼šå…ˆæ‰§è¡Œsuperuserè¿‡æ»¤ï¼Œå†æ‰§è¡Œç¾¤ç®¡è¿‡æ»¤
- **çµæ´»é…ç½®**ï¼šæ¯ä¸ªç¾¤ç»„ç‹¬ç«‹çš„è¿‡æ»¤è¯åˆ—è¡¨

## ğŸ”§ é«˜çº§é…ç½®

### æ•°æ®åº“é…ç½®

æ”¯æŒå¤šç§æ•°æ®åº“ç±»å‹ï¼š

```json
{
  "database": {
    "type": "sqlite",
    "data_path": "./data",
    "auto_expire_days": 30
  }
}
```

### æ¶ˆæ¯æ ‡å‡†åŒ–

å¯ç”¨NapCatæ¶ˆæ¯æ ‡å‡†åŒ–ï¼š

```json
{
  "message_normalization": {
    "enabled": true,
    "normalize_napcat_sent": true
  }
}
```

### æ—¥å¿—é…ç½®

```json
{
  "logging": {
    "level": "INFO",
    "file_rotation": true,
    "keep_days": 7
  }
}
```

## ğŸ“Š ç»Ÿè®¡åŠŸèƒ½

### æ”¯æŒçš„ç»Ÿè®¡ç»´åº¦
- **æ—¶é—´ç»´åº¦**ï¼šä»Šæ—¥ã€æ˜¨æ—¥ã€æŒ‡å®šæ—¥æœŸã€æ—¶é—´æ®µ
- **è´¦å·ç»´åº¦**ï¼šå•è´¦å·æˆ–å…¨éƒ¨è´¦å·ç»Ÿè®¡
- **ç¾¤ç»„ç»´åº¦**ï¼šæŒ‰ç¾¤ç»„åˆ†åˆ«ç»Ÿè®¡
- **å†…å®¹ç»´åº¦**ï¼šæŒ‡ä»¤ç»Ÿè®¡ã€å…³é”®è¯æœç´¢

### ç»Ÿè®¡æŒ‡ä»¤ç¤ºä¾‹
```bash
bsç»Ÿè®¡ -d today                    # ä»Šæ—¥ç»Ÿè®¡
bsç»Ÿè®¡ -d 2025-07-01               # æŒ‡å®šæ—¥æœŸ
bsç»Ÿè®¡ -k å°ç»´                     # å…³é”®è¯æœç´¢
bsç»Ÿè®¡ -c ww                       # æŒ‡ä»¤ç»Ÿè®¡
bsç»Ÿè®¡ -a -g                       # å…¨éƒ¨è´¦å·æŒ‰ç¾¤ç»„ç»Ÿè®¡
```

## ğŸŒ Webç•Œé¢åŠŸèƒ½

### ä»ªè¡¨æ¿
- å®æ—¶ç³»ç»ŸçŠ¶æ€ç›‘æ§
- æ¶ˆæ¯é‡è¶‹åŠ¿å›¾è¡¨
- è¿æ¥çŠ¶æ€æ€»è§ˆ
- è¿‡æ»¤ç‡ç»Ÿè®¡

### è¿æ¥ç®¡ç†
- è¿æ¥é…ç½®çš„å¢åˆ æ”¹æŸ¥
- ä»£ç†æœåŠ¡çš„å¯åŠ¨/åœæ­¢/é‡å¯
- è¿æ¥çŠ¶æ€å®æ—¶ç›‘æ§

### è´¦å·ç®¡ç†
- QQè´¦å·çš„å¯ç”¨/ç¦ç”¨
- è´¦å·æ´»è·ƒçŠ¶æ€ç›‘æ§
- è´¦å·é…ç½®ç®¡ç†

### ç¾¤ç»„ç®¡ç†
- ç¾¤ç»„çš„å¯ç”¨/ç¦ç”¨
- åˆ°æœŸæ—¶é—´è®¾ç½®
- è¿‡æ»¤è¯é…ç½®

### ç»Ÿè®¡åˆ†æ
- å¤šç»´åº¦æ•°æ®æŸ¥è¯¢
- å›¾è¡¨å¯è§†åŒ–å±•ç¤º
- æ•°æ®å¯¼å‡ºåŠŸèƒ½

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
BotShepherd/
â”œâ”€â”€ app/                    # æ ¸å¿ƒåº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ onebot/            # OneBotåè®®è§£æ
â”‚   â”œâ”€â”€ config_manager.py  # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database.py        # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ websocket_proxy.py # WebSocketä»£ç†
â”‚   â””â”€â”€ web_api.py         # Web APIæ¥å£
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶ç›®å½•
â”œâ”€â”€ data/                  # æ•°æ®åº“æ–‡ä»¶ç›®å½•
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶ç›®å½•
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”œâ”€â”€ templates/             # HTMLæ¨¡æ¿
â””â”€â”€ main.py               # ä¸»ç¨‹åºå…¥å£
```

### æ·»åŠ è‡ªå®šä¹‰æŒ‡ä»¤

1. ç»§æ‰¿ `Command` åŸºç±»
2. å®ç° `execute` æ–¹æ³•
3. æ³¨å†Œåˆ° `CommandHandler`

```python
class MyCommand(Command):
    def __init__(self):
        super().__init__(
            name="æˆ‘çš„æŒ‡ä»¤",
            description="è‡ªå®šä¹‰æŒ‡ä»¤ç¤ºä¾‹",
            required_permission=PermissionLevel.MEMBER
        )
    
    async def execute(self, ctx: CommandContext):
        return ctx.reply("Hello World!")

# æ³¨å†ŒæŒ‡ä»¤
command_handler.register_command(MyCommand())
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/Loping151/BotShepherd.git
cd BotShepherd

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
python main.py --test

# ä»£ç æ ¼å¼åŒ–
make format

# ä»£ç æ£€æŸ¥
make lint

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python main.py
```

### å¸¸ç”¨å‘½ä»¤

```bash
# ä½¿ç”¨Makefileï¼ˆæ¨èï¼‰
make help          # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make install       # å®‰è£…ä¾èµ–
make setup         # åˆå§‹åŒ–é…ç½®
make test          # è¿è¡Œæµ‹è¯•
make run           # å¯åŠ¨ç³»ç»Ÿ
make clean         # æ¸…ç†ä¸´æ—¶æ–‡ä»¶

# ç›´æ¥ä½¿ç”¨Python
python main.py --help     # æŸ¥çœ‹å¸®åŠ©
python main.py --setup    # åˆå§‹åŒ–é…ç½®
python main.py --test     # è¿è¡Œæµ‹è¯•
python main.py            # å¯åŠ¨ç³»ç»Ÿ
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [OneBot](https://onebot.dev/) - èŠå¤©æœºå™¨äººåº”ç”¨æ¥å£æ ‡å‡†
- [NapCat](https://github.com/NapNeko/NapCatQQ) - QQæœºå™¨äººæ¡†æ¶
- [Yunzai-Bot](https://github.com/yoimiya-kokomi/Yunzai-Bot) - åŸç¥QQç¾¤æœºå™¨äºº
- [Flask](https://flask.palletsprojects.com/) - Webæ¡†æ¶
- [Bootstrap](https://getbootstrap.com/) - å‰ç«¯UIæ¡†æ¶

---

**BotShepherd** - è®©Botç®¡ç†å˜å¾—ç®€å•è€Œå¼ºå¤§ ğŸ‘âœ¨
